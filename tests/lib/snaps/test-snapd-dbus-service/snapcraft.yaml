name: test-snapd-dbus-service
version: 1.0
summary: Python based example dbus service
description: ...
slots:
  dbus-session-slot:
    interface: dbus
    bus: session
    name: io.snapcraft.SnapDbusService
  dbus-system-slot:
    interface: dbus
    bus: system
    name: io.snapcraft.SnapDbusService
apps:
  session:
    command: bin/test-snapd-dbus-service session
    plugs:
      - network
    slots:
      - dbus-session-slot
    passthrough:
      activate-on:
        - dbus-session-slot
  system:
    command: bin/test-snapd-dbus-service system
    passthrough:
      daemon: dbus
      activate-on:
        - dbus-system-slot
    plugs:
      - network
    slots:
      - dbus-system-slot
parts:
  test-snapd-dbus-service:
    source: .
    plugin: python3
    stage-packages:
      - python3-dbus
      - python3-gi
      - gir1.2-glib-2.0
